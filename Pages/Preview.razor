@page "/preview"
@using Microsoft.AspNetCore.Components.Web
@inject NavigationManager Nav

<h3>Document Preview</h3>

@if (!string.IsNullOrWhiteSpace(PdfUrl))
{
    <iframe src="@PdfUrl" width="100%" height="800px" style="border:1px solid #ccc;" />
}
else
{
    <p>No PDF selected. Please upload a document first.</p>
}

@code {
    [Parameter] public string? PdfUrl { get; set; }

    protected override void OnInitialized()
    {
        var uri = Nav.ToAbsoluteUri(Nav.Uri);
        var query = Microsoft.AspNetCore.WebUtilities.QueryHelpers.ParseQuery(uri.Query);
        if (query.TryGetValue("file", out var filePath))
        {
            PdfUrl = filePath;
        }
    }
}